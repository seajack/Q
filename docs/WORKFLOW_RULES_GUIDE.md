# å·¥ä½œæµè§„åˆ™é…ç½®è¯¦ç»†æŒ‡å—

## ğŸ“‹ ç›®å½•

- [å·¥ä½œæµè§„åˆ™æ¦‚è¿°](#å·¥ä½œæµè§„åˆ™æ¦‚è¿°)
- [è§¦å‘æ¡ä»¶è¯¦è§£](#è§¦å‘æ¡ä»¶è¯¦è§£)
- [åŠ¨ä½œé…ç½®è¯¦è§£](#åŠ¨ä½œé…ç½®è¯¦è§£)
- [å¯è§†åŒ–é…ç½®æŒ‡å—](#å¯è§†åŒ–é…ç½®æŒ‡å—)
- [å®é™…åº”ç”¨åœºæ™¯](#å®é™…åº”ç”¨åœºæ™¯)
- [é«˜çº§é…ç½®æŠ€å·§](#é«˜çº§é…ç½®æŠ€å·§)
- [æ•…éšœæ’é™¤](#æ•…éšœæ’é™¤)

## ğŸ¯ å·¥ä½œæµè§„åˆ™æ¦‚è¿°

å·¥ä½œæµè§„åˆ™æ˜¯ç»„ç»‡æ¶æ„ä¸­å°ç³»ç»Ÿçš„æ ¸å¿ƒåŠŸèƒ½ï¼Œç”¨äºå®ç°ä¸šåŠ¡æµç¨‹çš„è‡ªåŠ¨åŒ–å¤„ç†ã€‚é€šè¿‡é…ç½®å·¥ä½œæµè§„åˆ™ï¼Œå¯ä»¥å®ç°ï¼š

- **è‡ªåŠ¨åŒ–å®¡æ‰¹æµç¨‹**ï¼šå‡å°‘äººå·¥å¹²é¢„ï¼Œæé«˜å®¡æ‰¹æ•ˆç‡
- **æ™ºèƒ½é€šçŸ¥æ¨é€**ï¼šåŠæ—¶é€šçŸ¥ç›¸å…³äººå‘˜ï¼Œç¡®ä¿ä¿¡æ¯ä¼ é€’
- **æ•°æ®è‡ªåŠ¨åŒæ­¥**ï¼šä¿æŒå„ç³»ç»Ÿé—´æ•°æ®çš„ä¸€è‡´æ€§
- **æƒé™è‡ªåŠ¨ç®¡ç†**ï¼šæ ¹æ®ä¸šåŠ¡è§„åˆ™è‡ªåŠ¨åˆ†é…å’Œå›æ”¶æƒé™

### è§„åˆ™ç»„æˆ

æ¯ä¸ªå·¥ä½œæµè§„åˆ™ç”±ä»¥ä¸‹éƒ¨åˆ†ç»„æˆï¼š

1. **åŸºæœ¬ä¿¡æ¯**ï¼šè§„åˆ™åç§°ã€ç±»å‹ã€ä¼˜å…ˆçº§ã€æè¿°
2. **è§¦å‘æ¡ä»¶**ï¼šå®šä¹‰è§„åˆ™ä½•æ—¶è¢«è§¦å‘
3. **æ‰§è¡ŒåŠ¨ä½œ**ï¼šå®šä¹‰è§„åˆ™è§¦å‘åæ‰§è¡Œçš„æ“ä½œ
4. **æ‰§è¡Œè®¾ç½®**ï¼šè¶…æ—¶æ—¶é—´ã€é‡è¯•æ¬¡æ•°ã€æ‰§è¡Œé¡ºåºç­‰

## ğŸ”§ è§¦å‘æ¡ä»¶è¯¦è§£

### 1. äº‹ä»¶è§¦å‘ (Event Trigger)

äº‹ä»¶è§¦å‘æ˜¯æœ€å¸¸ç”¨çš„è§¦å‘æ–¹å¼ï¼Œå½“ç³»ç»Ÿä¸­å‘ç”Ÿç‰¹å®šäº‹ä»¶æ—¶è‡ªåŠ¨æ‰§è¡Œè§„åˆ™ã€‚

#### æ”¯æŒçš„äº‹ä»¶ç±»å‹

##### å‘˜å·¥ç›¸å…³äº‹ä»¶
- `employee_created` - å‘˜å·¥åˆ›å»º
- `employee_updated` - å‘˜å·¥ä¿¡æ¯æ›´æ–°
- `employee_resigned` - å‘˜å·¥ç¦»èŒ
- `employee_transferred` - å‘˜å·¥è°ƒå²—
- `employee_promoted` - å‘˜å·¥æ™‹å‡

##### éƒ¨é—¨ç›¸å…³äº‹ä»¶
- `department_created` - éƒ¨é—¨åˆ›å»º
- `department_updated` - éƒ¨é—¨ä¿¡æ¯æ›´æ–°
- `department_deleted` - éƒ¨é—¨åˆ é™¤
- `department_merged` - éƒ¨é—¨åˆå¹¶

##### èŒä½ç›¸å…³äº‹ä»¶
- `position_created` - èŒä½åˆ›å»º
- `position_updated` - èŒä½ä¿¡æ¯æ›´æ–°
- `position_deleted` - èŒä½åˆ é™¤
- `position_assigned` - èŒä½åˆ†é…

#### é…ç½®ç¤ºä¾‹

**å‘˜å·¥å…¥èŒäº‹ä»¶**ï¼š
```json
{
  "type": "event",
  "event": "employee_created",
  "conditions": {
    "position_level": ">=": 8
  }
}
```

**éƒ¨é—¨è°ƒæ•´äº‹ä»¶**ï¼š
```json
{
  "type": "event",
  "event": "department_updated",
  "conditions": {
    "department_type": "in": ["management", "business"]
  }
}
```

### 2. å­—æ®µæ¡ä»¶ (Field Condition)

åŸºäºæ•°æ®å­—æ®µçš„å€¼è¿›è¡Œæ¡ä»¶åˆ¤æ–­ã€‚

#### æ”¯æŒçš„å­—æ®µ

##### å‘˜å·¥å­—æ®µ
- `position_level` - èŒä½çº§åˆ«
- `department_type` - éƒ¨é—¨ç±»å‹
- `employee_status` - å‘˜å·¥çŠ¶æ€
- `education_level` - å­¦å†å±‚æ¬¡
- `join_date` - å…¥èŒæ—¶é—´
- `salary_level` - è–ªèµ„çº§åˆ«

##### éƒ¨é—¨å­—æ®µ
- `department_level` - éƒ¨é—¨çº§åˆ«
- `department_type` - éƒ¨é—¨ç±»å‹
- `parent_department` - ä¸Šçº§éƒ¨é—¨
- `department_size` - éƒ¨é—¨è§„æ¨¡

##### èŒä½å­—æ®µ
- `position_level` - èŒä½çº§åˆ«
- `management_level` - ç®¡ç†å±‚çº§
- `position_type` - èŒä½ç±»å‹
- `is_management` - æ˜¯å¦ç®¡ç†èŒä½

#### æ¯”è¾ƒæ“ä½œç¬¦

- `eq` - ç­‰äº
- `ne` - ä¸ç­‰äº
- `gt` - å¤§äº
- `gte` - å¤§äºç­‰äº
- `lt` - å°äº
- `lte` - å°äºç­‰äº
- `in` - åŒ…å«
- `nin` - ä¸åŒ…å«
- `like` - æ¨¡ç³ŠåŒ¹é…
- `regex` - æ­£åˆ™è¡¨è¾¾å¼

#### é…ç½®ç¤ºä¾‹

**é«˜çº§èŒä½æ¡ä»¶**ï¼š
```json
{
  "type": "field",
  "field": "position_level",
  "operator": "gte",
  "value": "8"
}
```

**ç‰¹å®šéƒ¨é—¨æ¡ä»¶**ï¼š
```json
{
  "type": "field",
  "field": "department_type",
  "operator": "in",
  "value": ["management", "business"]
}
```

**è–ªèµ„çº§åˆ«æ¡ä»¶**ï¼š
```json
{
  "type": "field",
  "field": "salary_level",
  "operator": "gte",
  "value": "5"
}
```

### 3. æ—¶é—´æ¡ä»¶ (Time Condition)

åŸºäºæ—¶é—´è¿›è¡Œæ¡ä»¶åˆ¤æ–­ã€‚

#### æ—¶é—´ç±»å‹

##### å·¥ä½œæ—¶é—´æ¡ä»¶
- `work_time` - å·¥ä½œæ—¶é—´ï¼ˆ9:00-18:00ï¼‰
- `non_work_time` - éå·¥ä½œæ—¶é—´
- `weekday` - å·¥ä½œæ—¥
- `weekend` - å‘¨æœ«
- `holiday` - èŠ‚å‡æ—¥

##### ç‰¹å®šæ—¶é—´æ¡ä»¶
- `specific_time` - ç‰¹å®šæ—¶é—´ç‚¹
- `time_range` - æ—¶é—´èŒƒå›´
- `recurring_time` - é‡å¤æ—¶é—´

#### é…ç½®ç¤ºä¾‹

**å·¥ä½œæ—¶é—´æ¡ä»¶**ï¼š
```json
{
  "type": "time",
  "timeType": "work_time",
  "startTime": "09:00",
  "endTime": "18:00"
}
```

**ç‰¹å®šæ—¶é—´æ¡ä»¶**ï¼š
```json
{
  "type": "time",
  "timeType": "specific_time",
  "specificTime": "14:30"
}
```

### 4. ç”¨æˆ·æ¡ä»¶ (User Condition)

åŸºäºç”¨æˆ·å±æ€§è¿›è¡Œæ¡ä»¶åˆ¤æ–­ã€‚

#### ç”¨æˆ·å±æ€§

- `role` - ç”¨æˆ·è§’è‰²
- `department` - ç”¨æˆ·éƒ¨é—¨
- `position_level` - èŒä½çº§åˆ«
- `permissions` - ç”¨æˆ·æƒé™
- `login_time` - ç™»å½•æ—¶é—´
- `last_activity` - æœ€åæ´»åŠ¨æ—¶é—´

#### é…ç½®ç¤ºä¾‹

**ç®¡ç†å‘˜æ¡ä»¶**ï¼š
```json
{
  "type": "user",
  "role": "admin",
  "department": "hr"
}
```

**é«˜çº§èŒä½ç”¨æˆ·æ¡ä»¶**ï¼š
```json
{
  "type": "user",
  "position_level": "gte:8",
  "permissions": "in:['management_access']"
}
```

### 5. éƒ¨é—¨æ¡ä»¶ (Department Condition)

åŸºäºéƒ¨é—¨å±æ€§è¿›è¡Œæ¡ä»¶åˆ¤æ–­ã€‚

#### éƒ¨é—¨å±æ€§

- `department_type` - éƒ¨é—¨ç±»å‹
- `department_level` - éƒ¨é—¨çº§åˆ«
- `parent_department` - ä¸Šçº§éƒ¨é—¨
- `department_size` - éƒ¨é—¨è§„æ¨¡
- `department_status` - éƒ¨é—¨çŠ¶æ€

#### é…ç½®ç¤ºä¾‹

**ç®¡ç†éƒ¨é—¨æ¡ä»¶**ï¼š
```json
{
  "type": "department",
  "departmentType": "management",
  "departmentLevel": "gte:2"
}
```

## âš¡ åŠ¨ä½œé…ç½®è¯¦è§£

### 1. é€šçŸ¥åŠ¨ä½œ (Notification Action)

å‘é€å„ç§ç±»å‹çš„é€šçŸ¥ã€‚

#### é€šçŸ¥ç±»å‹

##### é‚®ä»¶é€šçŸ¥
```json
{
  "type": "notification",
  "notificationType": "email",
  "recipients": ["hr@company.com", "manager@company.com"],
  "subject": "æ–°å‘˜å·¥å…¥èŒé€šçŸ¥",
  "template": "new_employee_welcome",
  "attachments": ["employee_info.pdf"]
}
```

##### ç³»ç»Ÿé€šçŸ¥
```json
{
  "type": "notification",
  "notificationType": "system",
  "recipients": ["direct_supervisor", "hr_manager"],
  "message": "æ–°å‘˜å·¥å…¥èŒç”³è¯·å¾…å¤„ç†",
  "priority": "high",
  "expireTime": "24h"
}
```

##### çŸ­ä¿¡é€šçŸ¥
```json
{
  "type": "notification",
  "notificationType": "sms",
  "recipients": ["+8613800138000"],
  "message": "æ‚¨æœ‰æ–°çš„å®¡æ‰¹ä»»åŠ¡å¾…å¤„ç†",
  "template": "approval_reminder"
}
```

##### å¾®ä¿¡é€šçŸ¥
```json
{
  "type": "notification",
  "notificationType": "wechat",
  "recipients": ["user123"],
  "message": "æ–°å‘˜å·¥å…¥èŒé€šçŸ¥",
  "template": "workflow_notification"
}
```

#### æ¥æ”¶äººé…ç½®

##### å›ºå®šæ¥æ”¶äºº
```json
{
  "recipients": ["hr@company.com", "manager@company.com"]
}
```

##### åŠ¨æ€æ¥æ”¶äºº
```json
{
  "recipients": ["direct_supervisor", "hr_manager", "department_manager"]
}
```

##### æ¡ä»¶æ¥æ”¶äºº
```json
{
  "recipients": {
    "condition": "position_level >= 8",
    "users": ["general_manager", "hr_director"]
  }
}
```

### 2. å®¡æ‰¹åŠ¨ä½œ (Approval Action)

åˆ›å»ºå¤šçº§å®¡æ‰¹æµç¨‹ã€‚

#### å®¡æ‰¹æµç¨‹é…ç½®

##### ç®€å•å®¡æ‰¹æµç¨‹
```json
{
  "type": "approval",
  "approvalFlow": [
    {
      "step": 1,
      "approver": "direct_supervisor",
      "required": true,
      "timeout": 24
    },
    {
      "step": 2,
      "approver": "hr_manager",
      "required": true,
      "timeout": 48
    }
  ]
}
```

##### å¤æ‚å®¡æ‰¹æµç¨‹
```json
{
  "type": "approval",
  "approvalFlow": [
    {
      "step": 1,
      "approver": "direct_supervisor",
      "required": true,
      "timeout": 24,
      "conditions": {
        "position_level": "<": 8
      }
    },
    {
      "step": 2,
      "approver": "department_manager",
      "required": true,
      "timeout": 48,
      "conditions": {
        "position_level": ">=": 8
      }
    },
    {
      "step": 3,
      "approver": "general_manager",
      "required": false,
      "timeout": 72,
      "conditions": {
        "position_level": ">=": 10
      }
    }
  ]
}
```

#### å®¡æ‰¹äººç±»å‹

- `direct_supervisor` - ç›´æ¥ä¸Šçº§
- `department_manager` - éƒ¨é—¨ç»ç†
- `hr_manager` - HRç»ç†
- `general_manager` - æ€»ç»ç†
- `specific_user` - æŒ‡å®šç”¨æˆ·
- `role_based` - åŸºäºè§’è‰²

### 3. æ•°æ®åŒæ­¥åŠ¨ä½œ (Sync Action)

ä¸å…¶ä»–ç³»ç»Ÿè¿›è¡Œæ•°æ®åŒæ­¥ã€‚

#### åŒæ­¥ç›®æ ‡

##### ç»©æ•ˆè€ƒæ ¸ç³»ç»Ÿ
```json
{
  "type": "sync",
  "syncTarget": "performance_system",
  "syncFields": ["basic_info", "organization", "position"],
  "syncMethod": "api",
  "endpoint": "/api/employees/sync",
  "retryCount": 3,
  "timeout": 30
}
```

##### è´¢åŠ¡ç³»ç»Ÿ
```json
{
  "type": "sync",
  "syncTarget": "finance_system",
  "syncFields": ["basic_info", "salary_info"],
  "syncMethod": "database",
  "connection": "finance_db",
  "table": "employees"
}
```

##### OAç³»ç»Ÿ
```json
{
  "type": "sync",
  "syncTarget": "oa_system",
  "syncFields": ["basic_info", "organization"],
  "syncMethod": "file",
  "fileFormat": "csv",
  "filePath": "/sync/employees.csv"
}
```

#### åŒæ­¥å­—æ®µ

- `basic_info` - åŸºæœ¬ä¿¡æ¯
- `organization` - ç»„ç»‡å…³ç³»
- `position` - èŒä½ä¿¡æ¯
- `contact` - è”ç³»æ–¹å¼
- `salary_info` - è–ªèµ„ä¿¡æ¯
- `permissions` - æƒé™ä¿¡æ¯

### 4. æƒé™å˜æ›´åŠ¨ä½œ (Permission Action)

è‡ªåŠ¨ç®¡ç†ç”¨æˆ·æƒé™ã€‚

#### æƒé™ç±»å‹

##### ç³»ç»Ÿæƒé™
```json
{
  "type": "permission",
  "permissionType": "system",
  "permissionAction": "grant",
  "permissions": ["management_access", "report_access"],
  "scope": "department",
  "conditions": {
    "position_level": ">=": 8
  }
}
```

##### æ•°æ®æƒé™
```json
{
  "type": "permission",
  "permissionType": "data",
  "permissionAction": "grant",
  "permissions": ["employee_data_access", "salary_data_access"],
  "scope": "department",
  "conditions": {
    "department_type": "in": ["hr", "finance"]
  }
}
```

##### åŠŸèƒ½æƒé™
```json
{
  "type": "permission",
  "permissionType": "function",
  "permissionAction": "grant",
  "permissions": ["approval_access", "report_generation"],
  "scope": "role",
  "conditions": {
    "role": "in": ["manager", "hr"]
  }
}
```

#### æƒé™æ“ä½œ

- `grant` - æˆäºˆæƒé™
- `revoke` - æ’¤é”€æƒé™
- `modify` - ä¿®æ”¹æƒé™
- `transfer` - è½¬ç§»æƒé™

### 5. è‡ªåŠ¨æ‰§è¡ŒåŠ¨ä½œ (Auto Execute Action)

æ‰§è¡Œè‡ªåŠ¨åŒ–ä»»åŠ¡ã€‚

#### æ‰§è¡Œç±»å‹

##### è‡ªåŠ¨åˆ›å»ºè´¦å·
```json
{
  "type": "auto_execute",
  "executeType": "create_account",
  "executeParams": {
    "username": "{{employee.employee_id}}",
    "email": "{{employee.email}}",
    "role": "employee",
    "permissions": ["basic_access"]
  }
}
```

##### è‡ªåŠ¨åˆ†é…æƒé™
```json
{
  "type": "auto_execute",
  "executeType": "assign_permission",
  "executeParams": {
    "user": "{{employee.user_id}}",
    "permissions": ["employee_access", "department_access"],
    "scope": "department"
  }
}
```

##### è‡ªåŠ¨å‘é€é‚®ä»¶
```json
{
  "type": "auto_execute",
  "executeType": "send_email",
  "executeParams": {
    "template": "welcome_email",
    "recipients": ["{{employee.email}}"],
    "variables": {
      "name": "{{employee.name}}",
      "department": "{{employee.department}}"
    }
  }
}
```

## ğŸ¨ å¯è§†åŒ–é…ç½®æŒ‡å—

### 1. è§¦å‘æ¡ä»¶é…ç½®

#### äº‹ä»¶è§¦å‘é…ç½®
1. é€‰æ‹©"äº‹ä»¶è§¦å‘"ç±»å‹
2. ä»ä¸‹æ‹‰åˆ—è¡¨ä¸­é€‰æ‹©äº‹ä»¶ç±»å‹
3. è®¾ç½®äº‹ä»¶å‚æ•°ï¼ˆå¦‚éœ€è¦ï¼‰
4. é…ç½®è§¦å‘æ—¶æœº

#### å­—æ®µæ¡ä»¶é…ç½®
1. é€‰æ‹©"å­—æ®µæ¡ä»¶"ç±»å‹
2. é€‰æ‹©è¦æ¯”è¾ƒçš„å­—æ®µ
3. é€‰æ‹©æ¯”è¾ƒæ“ä½œç¬¦
4. è¾“å…¥æ¯”è¾ƒå€¼

#### æ—¶é—´æ¡ä»¶é…ç½®
1. é€‰æ‹©"æ—¶é—´æ¡ä»¶"ç±»å‹
2. é€‰æ‹©æ—¶é—´ç±»å‹
3. è®¾ç½®å…·ä½“æ—¶é—´ï¼ˆå¦‚éœ€è¦ï¼‰
4. é…ç½®æ—¶é—´èŒƒå›´

### 2. åŠ¨ä½œé…ç½®

#### é€šçŸ¥åŠ¨ä½œé…ç½®
1. é€‰æ‹©"å‘é€é€šçŸ¥"ç±»å‹
2. é€‰æ‹©é€šçŸ¥ç±»å‹ï¼ˆé‚®ä»¶ã€ç³»ç»Ÿã€çŸ­ä¿¡ã€å¾®ä¿¡ï¼‰
3. è®¾ç½®æ¥æ”¶äºº
4. ç¼–å†™é€šçŸ¥å†…å®¹

#### å®¡æ‰¹åŠ¨ä½œé…ç½®
1. é€‰æ‹©"åˆ›å»ºå®¡æ‰¹"ç±»å‹
2. é…ç½®å®¡æ‰¹æµç¨‹
3. è®¾ç½®å®¡æ‰¹æ—¶é™
4. å®šä¹‰å¿…éœ€å®¡æ‰¹äºº

#### åŒæ­¥åŠ¨ä½œé…ç½®
1. é€‰æ‹©"æ•°æ®åŒæ­¥"ç±»å‹
2. é€‰æ‹©åŒæ­¥ç›®æ ‡ç³»ç»Ÿ
3. é€‰æ‹©åŒæ­¥å­—æ®µ
4. é…ç½®åŒæ­¥æ–¹å¼

## ğŸ¢ å®é™…åº”ç”¨åœºæ™¯

### 1. å‘˜å·¥å…¥èŒæµç¨‹

#### åœºæ™¯æè¿°
æ–°å‘˜å·¥å…¥èŒæ—¶ï¼Œéœ€è¦è‡ªåŠ¨è§¦å‘ä¸€ç³»åˆ—æµç¨‹ï¼š
1. å‘é€å…¥èŒé€šçŸ¥ç»™HRå’Œç›´æ¥ä¸Šçº§
2. åˆ›å»ºå®¡æ‰¹æµç¨‹
3. è‡ªåŠ¨åˆ›å»ºç”¨æˆ·è´¦å·
4. åˆ†é…åŸºæœ¬æƒé™
5. åŒæ­¥æ•°æ®åˆ°å…¶ä»–ç³»ç»Ÿ

#### é…ç½®ç¤ºä¾‹

**è§¦å‘æ¡ä»¶**ï¼š
```json
{
  "type": "event",
  "event": "employee_created"
}
```

**æ‰§è¡ŒåŠ¨ä½œ**ï¼š
```json
[
  {
    "type": "notification",
    "notificationType": "email",
    "recipients": ["hr@company.com", "direct_supervisor"],
    "template": "new_employee_welcome"
  },
  {
    "type": "approval",
    "approvalFlow": [
      {"step": 1, "approver": "direct_supervisor", "required": true},
      {"step": 2, "approver": "hr_manager", "required": true}
    ]
  },
  {
    "type": "auto_execute",
    "executeType": "create_account",
    "executeParams": {
      "username": "{{employee.employee_id}}",
      "email": "{{employee.email}}"
    }
  },
  {
    "type": "sync",
    "syncTarget": "performance_system",
    "syncFields": ["basic_info", "organization"]
  }
]
```

### 2. é«˜çº§èŒä½å®¡æ‰¹æµç¨‹

#### åœºæ™¯æè¿°
å½“åˆ›å»ºæˆ–è°ƒæ•´é«˜çº§èŒä½ï¼ˆçº§åˆ«>=8ï¼‰æ—¶ï¼Œéœ€è¦ç‰¹æ®Šçš„å®¡æ‰¹æµç¨‹ï¼š
1. éƒ¨é—¨ç»ç†å®¡æ‰¹
2. HRæ€»ç›‘å®¡æ‰¹
3. æ€»ç»ç†å®¡æ‰¹ï¼ˆå¯é€‰ï¼‰
4. æƒé™è‡ªåŠ¨åˆ†é…

#### é…ç½®ç¤ºä¾‹

**è§¦å‘æ¡ä»¶**ï¼š
```json
{
  "type": "field",
  "field": "position_level",
  "operator": "gte",
  "value": "8"
}
```

**æ‰§è¡ŒåŠ¨ä½œ**ï¼š
```json
[
  {
    "type": "approval",
    "approvalFlow": [
      {"step": 1, "approver": "department_manager", "required": true, "timeout": 24},
      {"step": 2, "approver": "hr_director", "required": true, "timeout": 48},
      {"step": 3, "approver": "general_manager", "required": false, "timeout": 72}
    ]
  },
  {
    "type": "permission",
    "permissionType": "system",
    "permissionAction": "grant",
    "permissions": ["management_access", "report_access"]
  }
]
```

### 3. éƒ¨é—¨è°ƒæ•´é€šçŸ¥æµç¨‹

#### åœºæ™¯æè¿°
å½“éƒ¨é—¨å‘ç”Ÿè°ƒæ•´æ—¶ï¼Œéœ€è¦é€šçŸ¥ç›¸å…³äººå‘˜ï¼š
1. éƒ¨é—¨æˆå‘˜
2. ç›¸å…³éƒ¨é—¨ç»ç†
3. HRéƒ¨é—¨
4. ä¸Šçº§éƒ¨é—¨

#### é…ç½®ç¤ºä¾‹

**è§¦å‘æ¡ä»¶**ï¼š
```json
{
  "type": "event",
  "event": "department_updated"
}
```

**æ‰§è¡ŒåŠ¨ä½œ**ï¼š
```json
[
  {
    "type": "notification",
    "notificationType": "system",
    "recipients": ["department_members", "department_manager"],
    "message": "éƒ¨é—¨ä¿¡æ¯å·²æ›´æ–°ï¼Œè¯·æŸ¥çœ‹æœ€æ–°ä¿¡æ¯"
  },
  {
    "type": "notification",
    "notificationType": "email",
    "recipients": ["hr@company.com"],
    "template": "department_change_notification"
  }
]
```

## ğŸ”§ é«˜çº§é…ç½®æŠ€å·§

### 1. æ¡ä»¶ç»„åˆ

#### å¤šæ¡ä»¶ç»„åˆ
```json
{
  "type": "combined",
  "operator": "AND",
  "conditions": [
    {
      "type": "field",
      "field": "position_level",
      "operator": "gte",
      "value": "8"
    },
    {
      "type": "field",
      "field": "department_type",
      "operator": "in",
      "value": ["management", "business"]
    }
  ]
}
```

#### æ¡ä»¶åµŒå¥—
```json
{
  "type": "combined",
  "operator": "OR",
  "conditions": [
    {
      "type": "field",
      "field": "position_level",
      "operator": "gte",
      "value": "10"
    },
    {
      "type": "combined",
      "operator": "AND",
      "conditions": [
        {
          "type": "field",
          "field": "position_level",
          "operator": "gte",
          "value": "8"
        },
        {
          "type": "field",
          "field": "department_type",
          "operator": "eq",
          "value": "management"
        }
      ]
    }
  ]
}
```

### 2. åŠ¨ä½œé“¾å¼æ‰§è¡Œ

#### é¡ºåºæ‰§è¡Œ
```json
[
  {
    "type": "notification",
    "notificationType": "system",
    "message": "æµç¨‹å¼€å§‹æ‰§è¡Œ"
  },
  {
    "type": "approval",
    "approvalFlow": [...]
  },
  {
    "type": "sync",
    "syncTarget": "performance_system"
  },
  {
    "type": "notification",
    "notificationType": "email",
    "message": "æµç¨‹æ‰§è¡Œå®Œæˆ"
  }
]
```

#### æ¡ä»¶æ‰§è¡Œ
```json
[
  {
    "type": "notification",
    "notificationType": "system",
    "message": "æµç¨‹å¼€å§‹æ‰§è¡Œ"
  },
  {
    "type": "approval",
    "approvalFlow": [...],
    "onSuccess": [
      {
        "type": "sync",
        "syncTarget": "performance_system"
      }
    ],
    "onFailure": [
      {
        "type": "notification",
        "notificationType": "email",
        "message": "å®¡æ‰¹å¤±è´¥ï¼Œè¯·é‡æ–°å¤„ç†"
      }
    ]
  }
]
```

### 3. å˜é‡ä½¿ç”¨

#### ç³»ç»Ÿå˜é‡
- `{{employee.name}}` - å‘˜å·¥å§“å
- `{{employee.email}}` - å‘˜å·¥é‚®ç®±
- `{{employee.department}}` - å‘˜å·¥éƒ¨é—¨
- `{{employee.position}}` - å‘˜å·¥èŒä½
- `{{employee.supervisor}}` - ç›´æ¥ä¸Šçº§

#### åŠ¨æ€å˜é‡
- `{{current_user}}` - å½“å‰ç”¨æˆ·
- `{{current_time}}` - å½“å‰æ—¶é—´
- `{{current_date}}` - å½“å‰æ—¥æœŸ
- `{{system_version}}` - ç³»ç»Ÿç‰ˆæœ¬

#### å˜é‡ä½¿ç”¨ç¤ºä¾‹
```json
{
  "type": "notification",
  "notificationType": "email",
  "recipients": ["{{employee.supervisor.email}}"],
  "subject": "{{employee.name}}çš„å…¥èŒç”³è¯·",
  "message": "æ‚¨å¥½ï¼Œ{{employee.name}}ï¼ˆ{{employee.position}}ï¼‰çš„å…¥èŒç”³è¯·å·²æäº¤ï¼Œè¯·åŠæ—¶å¤„ç†ã€‚"
}
```

## ğŸ” æ•…éšœæ’é™¤

### 1. è§„åˆ™ä¸æ‰§è¡Œ

#### æ£€æŸ¥æ­¥éª¤
1. ç¡®è®¤è§„åˆ™å·²å¯ç”¨
2. æ£€æŸ¥è§¦å‘æ¡ä»¶æ˜¯å¦æ­£ç¡®
3. æŸ¥çœ‹æ‰§è¡Œæ—¥å¿—
4. éªŒè¯åŠ¨ä½œé…ç½®

#### å¸¸è§é—®é¢˜
- è§¦å‘æ¡ä»¶è¿‡äºä¸¥æ ¼
- åŠ¨ä½œé…ç½®é”™è¯¯
- ç³»ç»Ÿæƒé™ä¸è¶³
- ç½‘ç»œè¿æ¥é—®é¢˜

### 2. é€šçŸ¥å‘é€å¤±è´¥

#### æ£€æŸ¥æ­¥éª¤
1. æ£€æŸ¥é€šçŸ¥é…ç½®
2. éªŒè¯æ¥æ”¶äººä¿¡æ¯
3. æ£€æŸ¥ç½‘ç»œè¿æ¥
4. æŸ¥çœ‹é”™è¯¯æ—¥å¿—

#### å¸¸è§é—®é¢˜
- é‚®ç®±åœ°å€é”™è¯¯
- SMTPé…ç½®é—®é¢˜
- æ¨¡æ¿ä¸å­˜åœ¨
- æƒé™ä¸è¶³

### 3. å®¡æ‰¹æµç¨‹å¡ä½

#### æ£€æŸ¥æ­¥éª¤
1. æ£€æŸ¥å®¡æ‰¹äººé…ç½®
2. éªŒè¯å®¡æ‰¹äººæƒé™
3. æŸ¥çœ‹å®¡æ‰¹æ—¥å¿—
4. æ£€æŸ¥è¶…æ—¶è®¾ç½®

#### å¸¸è§é—®é¢˜
- å®¡æ‰¹äººä¸å­˜åœ¨
- å®¡æ‰¹äººæƒé™ä¸è¶³
- è¶…æ—¶æ—¶é—´è¿‡çŸ­
- å®¡æ‰¹æµç¨‹é…ç½®é”™è¯¯

### 4. æ•°æ®åŒæ­¥å¤±è´¥

#### æ£€æŸ¥æ­¥éª¤
1. æ£€æŸ¥ç›®æ ‡ç³»ç»Ÿè¿æ¥
2. éªŒè¯åŒæ­¥å­—æ®µ
3. æŸ¥çœ‹åŒæ­¥æ—¥å¿—
4. æ£€æŸ¥æ•°æ®æ ¼å¼

#### å¸¸è§é—®é¢˜
- ç›®æ ‡ç³»ç»Ÿä¸å¯ç”¨
- å­—æ®µæ˜ å°„é”™è¯¯
- æ•°æ®æ ¼å¼ä¸åŒ¹é…
- æƒé™ä¸è¶³

## ğŸ“Š ç›‘æ§å’Œç»Ÿè®¡

### 1. æ‰§è¡Œç»Ÿè®¡
- è§„åˆ™æ‰§è¡Œæ¬¡æ•°
- æ‰§è¡ŒæˆåŠŸç‡
- å¹³å‡æ‰§è¡Œæ—¶é—´
- å¤±è´¥åŸå› åˆ†æ

### 2. æ€§èƒ½ç›‘æ§
- ç³»ç»Ÿèµ„æºä½¿ç”¨
- å“åº”æ—¶é—´
- å¹¶å‘å¤„ç†èƒ½åŠ›
- é”™è¯¯ç‡ç»Ÿè®¡

### 3. ä¸šåŠ¡åˆ†æ
- æµç¨‹æ•ˆç‡åˆ†æ
- å®¡æ‰¹æ—¶é—´ç»Ÿè®¡
- é€šçŸ¥é€è¾¾ç‡
- ç”¨æˆ·æ»¡æ„åº¦

---

**é€šè¿‡æœ¬æŒ‡å—ï¼Œæ‚¨åº”è¯¥èƒ½å¤Ÿç†Ÿç»ƒé…ç½®å’Œä½¿ç”¨å·¥ä½œæµè§„åˆ™ç³»ç»Ÿã€‚å¦‚æœ‰ä»»ä½•é—®é¢˜ï¼Œè¯·å‚è€ƒå¸¸è§é—®é¢˜éƒ¨åˆ†æˆ–è”ç³»æŠ€æœ¯æ”¯æŒã€‚**
