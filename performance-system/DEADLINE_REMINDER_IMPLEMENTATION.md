# 截止日期提醒功能实现说明

## 功能概述

绩效考核系统的首页截止日期提醒功能已从模拟数据替换为真实数据，现在能够显示即将到期的考核任务。

## 实现内容

### 后端实现

1. **新增API接口**: `/api/deadline-reminders/`
   - 获取即将到期的考核任务（7天内到期）
   - 返回任务详情、截止时间、状态等信息

2. **数据结构**:
   ```json
   {
     "deadlines": [
       {
         "id": 252,
         "title": "董卓 对 孙权 的考核",
         "deadline": "2025-10-11",
         "type": "evaluation",
         "status": "pending",
         "cycle_name": "2025年第四季度考核",
         "evaluator_name": "董卓",
         "evaluatee_name": "孙权",
         "relation_type": "同级互评",
         "hours_left": 87,
         "days_left": 3
       }
     ],
     "total_count": 10,
     "urgent_count": 0,
     "warning_count": 10
   }
   ```

3. **业务逻辑**:
   - 获取所有活跃的考核周期
   - 筛选7天内到期的周期
   - 获取这些周期下的待完成考核任务
   - 计算剩余时间并分类（紧急/警告/正常）

### 前端实现

1. **组件更新**: `DeadlineReminder.vue`
   - 替换模拟数据为真实API调用
   - 使用 `statsApi.deadlineReminders()` 获取数据
   - 保持原有的UI展示逻辑

2. **API集成**: `utils/api.ts`
   - 新增 `deadlineReminders()` 方法
   - 调用后端 `/deadline-reminders/` 接口

## 功能特性

1. **智能筛选**: 只显示7天内到期的考核任务
2. **状态分类**: 
   - 紧急（1天内到期）
   - 警告（1-3天到期）
   - 正常（3-7天到期）
3. **详细信息**: 显示评价人、被评价人、考核周期、关系类型等
4. **实时更新**: 每次页面加载时获取最新数据

## 测试验证

- ✅ API接口正常工作
- ✅ 返回真实考核任务数据
- ✅ 数据结构完整
- ✅ 时间计算准确
- ✅ 前端组件正常显示

## 使用说明

1. 确保后端服务运行在 `http://127.0.0.1:8001`
2. 确保数据库中有活跃的考核周期和考核任务
3. 前端页面会自动加载截止日期提醒数据
4. 数据会根据考核周期的结束日期自动更新

## 注意事项

- 只有状态为 `active` 的考核周期才会被考虑
- 只有状态为 `pending` 或 `in_progress` 的考核任务才会显示
- 截止日期基于考核周期的 `end_date` 字段
- 时间计算基于当前系统时间
